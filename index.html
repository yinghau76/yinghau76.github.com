<!doctype html>
<html prefix="og: http://ogp.me/ns#">
<head>
	<meta name="generator" content="Hugo 0.80.0" />
    <title>Simply Patrick</title>

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">

  <meta property="og:site_name" content="Simply Patrick"/>
  <meta property="og:url" content="https://blog.simplypatrick.com/"/>
  <meta property="og:type" content="website"/>
  <meta property="og:image" content="https://lh3.googleusercontent.com/-GqbL2_hPq9Y/UC9brHyHa1I/AAAAAAAAEoY/rGGtCNWe3Vw/s800/patrick.jpg"/>

    <link href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/bootstrap-toc.css" rel="stylesheet">
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">

  <link href='//fonts.googleapis.com/css?family=Julee' rel='stylesheet' type='text/css'>
  <link href='//fonts.googleapis.com/css?family=Just+Me+Again+Down+Here' rel='stylesheet' type='text/css'>
  <link href='//fonts.googleapis.com/css?family=Source+Code+Pro' rel='stylesheet' type='text/css'>
  <link href='//fonts.googleapis.com/css?family=Arvo' rel='stylesheet' type='text/css'>

  <link href="/css/prism.css" rel="stylesheet" />
  <link href="/css/blog.css" rel="stylesheet" >

  <link href="/images/favicon.ico" rel="shortcut icon" type="image/x-icon" />


</head>
<body>
    <div class="container" id="main">
    <div class="row">
      <header role="banner">
  <div class="row">
    <div class="col-md-9">
      <h1 class="banner-title">
        <a href="/">Simply Patrick</a>
        <small class="banner-subtitle">Hopes can always go up, tears can only come down.</small>
      </h1>
    </div>
    <div class="col-md-3 text-right">
      <ul class="social-links list-inline">
        <li><a href="https://twitter.com/PatrickSimply"><i class="fa fa-twitter"></i></a></li>
        <li><a href="https://www.facebook.com/yinghau76"><i class="fa fa-facebook"></i></a></li>
        <li><a href="https://www.linkedin.com/in/yinghau76"><i class="fa fa-linkedin"></i></a></li>
        <li><a href="https://github.com/p47t"><i class="fa fa-github-alt"></i></a></li>
      </ul>
    </div>
  <div>
</header>

      <nav class="navbar navbar-default" role="navigation">
  <div class="container-fluid">
    
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/posts/">posts</a>
      <a class="navbar-brand" href="/tils/">TILs</a>
    </div>

    
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">categories <b class="caret"></b></a>
          <ul class="dropdown-menu">
          
            <li><a href="/categories/blog">blog <span class="badge">3</span></a></li>
          
            <li><a href="/categories/business">business <span class="badge">26</span></a></li>
          
            <li><a href="/categories/career">career <span class="badge">20</span></a></li>
          
            <li><a href="/categories/development">development <span class="badge">52</span></a></li>
          
            <li><a href="/categories/game">game <span class="badge">3</span></a></li>
          
            <li><a href="/categories/programming">programming <span class="badge">184</span></a></li>
          
            <li><a href="/categories/web">web <span class="badge">10</span></a></li>
          
          </ul>
        </li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">tags <b class="caret"></b></a>
          <ul class="dropdown-menu">
          
            <li><a href="/tags/agile">agile <span class="badge">4</span></a></li>
          
            <li><a href="/tags/android">android <span class="badge">12</span></a></li>
          
            <li><a href="/tags/book">book <span class="badge">25</span></a></li>
          
            <li><a href="/tags/build">build <span class="badge">3</span></a></li>
          
            <li><a href="/tags/c&#43;&#43;">c&#43;&#43; <span class="badge">3</span></a></li>
          
            <li><a href="/tags/cloud">cloud <span class="badge">1</span></a></li>
          
            <li><a href="/tags/crack">crack <span class="badge">2</span></a></li>
          
            <li><a href="/tags/cxx">cxx <span class="badge">5</span></a></li>
          
            <li><a href="/tags/dotnet">dotnet <span class="badge">42</span></a></li>
          
            <li><a href="/tags/embedded">embedded <span class="badge">5</span></a></li>
          
            <li><a href="/tags/engineer">engineer <span class="badge">2</span></a></li>
          
            <li><a href="/tags/font">font <span class="badge">3</span></a></li>
          
            <li><a href="/tags/fuchsia">fuchsia <span class="badge">2</span></a></li>
          
            <li><a href="/tags/game">game <span class="badge">2</span></a></li>
          
            <li><a href="/tags/git">git <span class="badge">4</span></a></li>
          
            <li><a href="/tags/go">go <span class="badge">5</span></a></li>
          
            <li><a href="/tags/google">google <span class="badge">5</span></a></li>
          
            <li><a href="/tags/ios">ios <span class="badge">5</span></a></li>
          
            <li><a href="/tags/java">java <span class="badge">9</span></a></li>
          
            <li><a href="/tags/jupyter">jupyter <span class="badge">1</span></a></li>
          
            <li><a href="/tags/kotlin">kotlin <span class="badge">2</span></a></li>
          
            <li><a href="/tags/kuso">kuso <span class="badge">3</span></a></li>
          
            <li><a href="/tags/management">management <span class="badge">3</span></a></li>
          
            <li><a href="/tags/microsoft">microsoft <span class="badge">14</span></a></li>
          
            <li><a href="/tags/octopress">octopress <span class="badge">3</span></a></li>
          
            <li><a href="/tags/osx">osx <span class="badge">4</span></a></li>
          
            <li><a href="/tags/patterns">patterns <span class="badge">4</span></a></li>
          
            <li><a href="/tags/process">process <span class="badge">2</span></a></li>
          
            <li><a href="/tags/ruby">ruby <span class="badge">15</span></a></li>
          
            <li><a href="/tags/rust">rust <span class="badge">3</span></a></li>
          
            <li><a href="/tags/scala">scala <span class="badge">3</span></a></li>
          
            <li><a href="/tags/startup">startup <span class="badge">3</span></a></li>
          
            <li><a href="/tags/web">web <span class="badge">2</span></a></li>
          
            <li><a href="/tags/webkit">webkit <span class="badge">3</span></a></li>
          
            <li><a href="/tags/windows">windows <span class="badge">5</span></a></li>
          
            <li><a href="/tags/work">work <span class="badge">11</span></a></li>
          
          </ul>
        </li>
      </ul>
      <form class="navbar-form navbar-left" role="search" action="//google.com/search" method="get">
        <div class="form-group">
          <input type="hidden" name="as_sitesearch" value="blog.simplypatrick.com" />
          <input class="form-control" type="text" name="q" results="0" placeholder="search"/>
        </div>
        <button type="submit" class="btn btn-default">submit</button>
      </form>
      <ul class="nav navbar-nav navbar-right">
        <li><a href="/pages/about">about</a></li>
      </ul>
    </div>
  </div>
</nav>

    </div>

  <div class="row">
    <div class="col-md-9">
      
      
                <span class="post-title">
          <a href="https://blog.simplypatrick.com/posts/2021/01-02-rust-jupyter-notebook/" title="建置 Jupyter Notebook 的 Rust 運作環境">
            <h2>建置 Jupyter Notebook 的 Rust 運作環境</h2>
          </a>
        </span>
        <div class="post-meta">
          <span class="post-date">January 2, 2021</span>
          
          <a href="/categories/programming"><span class="label label-info">programming</span></a>
          
          
          <a href="/tags/rust"><span class="label label-primary">rust</span></a>
          
          <a href="/tags/jupyter"><span class="label label-primary">jupyter</span></a>
          
        </div>
        <div class="post-content"><p>最近重新安裝了 macOS Big Sur，也順便想試試 Jupyter Notebook 的 Rust 運作環境，再加上這幾天放假比較有時間，就把安裝的過程記錄下來。</p>
<h3 id="安裝-miniconda">安裝 Miniconda</h3>
<p>過去一直覺得 Anaconda 有點肥大，所以這次決定先從安裝比較精簡的 miniconda 開始:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ brew install --cask miniconda
</code></pre></div><p>新增 <code>conda-forge</code> channel 等下才能安裝一些需要的套件如 <code>jupyterlab</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ conda config --add channels conda-forge
$ conda config --set channel_priority strict
</code></pre></div><p>然後需要初始化 conda 的 base 環境，一般都是跑 <code>conda init</code>，但它會加一段不是很通用的設定到我個人的 <code>.zshrc</code>，我不是很喜歡這種做法，所以就先只套用在目前的 shell 裡:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ eval <span style="color:#e6db74">`</span>conda shell.zsh hook<span style="color:#e6db74">`</span>
</code></pre></div><h3 id="創建新的-conda-環境">創建新的 conda 環境</h3>
<p>創建一個新的環境叫 <code>rust-notebook</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">(</span>base<span style="color:#f92672">)</span> $ conda create -n rust-notebook python<span style="color:#f92672">=</span><span style="color:#ae81ff">3</span>
<span style="color:#f92672">(</span>base<span style="color:#f92672">)</span> $ conda activate rust-notebook
</code></pre></div><h3 id="安裝-jupyterlab">安裝 JupyterLab</h3>
<p>在新的環境指定安裝 jupyterlab 版本 2.2.9，因為最新的 3.0 似乎與最新的 <code>jupyterlab-plotly</code> 不相容:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">(</span>rust-notebook<span style="color:#f92672">)</span> $ conda install jupyterlab<span style="color:#f92672">=</span>2.2.9
</code></pre></div><p>然後安裝 <code>jupyterlab-plotly</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">(</span>rust-notebook<span style="color:#f92672">)</span> $ jupyter labextension install jupyterlab-plotly
</code></pre></div><h3 id="安裝-evcxr_jupyter">安裝 evcxr_jupyter</h3>
<p>這邊假設 Rust 已經安裝完成，直接用 Cargo 安裝 Rust 的 Jupyter kernel:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cargo install evcxr_jupyter
$ evcxr_jupyter --install
</code></pre></div><p>啟動 JupyterLab:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">(</span>rust-notebook<span style="color:#f92672">)</span> $ jupyter lab
</code></pre></div><p>如果可以看到下列 Rust 圖樣應該就是成功了:</p>
<p><img src="new-notebook.png" alt=""></p>
<h3 id="範例執行結果">範例執行結果</h3>
<p>試一下:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Rust" data-lang="Rust">println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;Hello, Jupyter!&#34;</span>);
</code></pre></div><pre><code>Hello, Jupyter!
</code></pre>
<p>來畫個圖:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Rust" data-lang="Rust">:<span style="color:#a6e22e">dep</span> plotters <span style="color:#f92672">=</span> { git <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;https://github.com/38/plotters&#34;</span>, default_features <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>, features <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#34;evcxr&#34;</span>, <span style="color:#e6db74">&#34;line_series&#34;</span>] }
<span style="color:#66d9ef">extern</span> <span style="color:#66d9ef">crate</span> plotters;
<span style="color:#66d9ef">use</span> plotters::prelude::<span style="color:#f92672">*</span>;
<span style="color:#66d9ef">use</span> plotters::series::<span style="color:#f92672">*</span>;

<span style="color:#66d9ef">let</span> figure <span style="color:#f92672">=</span> evcxr_figure((<span style="color:#ae81ff">640</span>, <span style="color:#ae81ff">480</span>), <span style="color:#f92672">|</span>root<span style="color:#f92672">|</span> {
    root.fill(<span style="color:#f92672">&amp;</span>WHITE);
    <span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> chart <span style="color:#f92672">=</span> ChartBuilder::on(<span style="color:#f92672">&amp;</span>root)
        .caption(<span style="color:#e6db74">&#34;y=x^2&#34;</span>, (<span style="color:#e6db74">&#34;Arial&#34;</span>, <span style="color:#ae81ff">50</span>).into_font())
        .margin(<span style="color:#ae81ff">5</span>)
        .x_label_area_size(<span style="color:#ae81ff">30</span>)
        .y_label_area_size(<span style="color:#ae81ff">30</span>)
        .build_ranged(<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span><span style="color:#66d9ef">f32</span>..<span style="color:#ae81ff">1</span><span style="color:#66d9ef">f32</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">0.1</span><span style="color:#66d9ef">f32</span>..<span style="color:#ae81ff">1</span><span style="color:#66d9ef">f32</span>)<span style="color:#f92672">?</span>;

    chart.configure_mesh().draw()<span style="color:#f92672">?</span>;

    chart.draw_series(LineSeries::new(
        (<span style="color:#f92672">-</span><span style="color:#ae81ff">50</span>..<span style="color:#f92672">=</span><span style="color:#ae81ff">50</span>).map(<span style="color:#f92672">|</span>x<span style="color:#f92672">|</span> x <span style="color:#66d9ef">as</span> <span style="color:#66d9ef">f32</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">50.0</span>).map(<span style="color:#f92672">|</span>x<span style="color:#f92672">|</span> (x, x <span style="color:#f92672">*</span> x)),
        <span style="color:#f92672">&amp;</span>RED,
    )).unwrap()
        .label(<span style="color:#e6db74">&#34;y = x^2&#34;</span>)
        .legend(<span style="color:#f92672">|</span>(x,y)<span style="color:#f92672">|</span> PathElement::new(vec<span style="color:#f92672">!</span>[(x,y), (x <span style="color:#f92672">+</span> <span style="color:#ae81ff">20</span>,y)], <span style="color:#f92672">&amp;</span>RED));

    chart.configure_series_labels()
        .background_style(<span style="color:#f92672">&amp;</span>WHITE.mix(<span style="color:#ae81ff">0.8</span>))
        .border_style(<span style="color:#f92672">&amp;</span>BLACK)
        .draw()<span style="color:#f92672">?</span>;
    Ok(())
});
figure
</code></pre></div><div style=""><svg width="640" height="480" viewBox="0 0 640 480" xmlns="http://www.w3.org/2000/svg">
<rect x="0" y="0" width="639" height="479" opacity="1" fill="#FFFFFF" stroke="none"/>
<text x="320" y="10" dy="0.76em" text-anchor="middle" font-family="Arial" font-size="40.32258064516129" opacity="1" fill="#000000">
y=x^2
</text>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="41" y1="444" x2="41" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="47" y1="444" x2="47" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="53" y1="444" x2="53" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="59" y1="444" x2="59" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="65" y1="444" x2="65" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="71" y1="444" x2="71" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="77" y1="444" x2="77" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="83" y1="444" x2="83" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="89" y1="444" x2="89" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="95" y1="444" x2="95" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="101" y1="444" x2="101" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="107" y1="444" x2="107" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="113" y1="444" x2="113" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="119" y1="444" x2="119" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="125" y1="444" x2="125" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="131" y1="444" x2="131" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="137" y1="444" x2="137" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="143" y1="444" x2="143" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="149" y1="444" x2="149" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="155" y1="444" x2="155" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="161" y1="444" x2="161" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="167" y1="444" x2="167" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="173" y1="444" x2="173" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="179" y1="444" x2="179" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="185" y1="444" x2="185" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="191" y1="444" x2="191" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="197" y1="444" x2="197" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="203" y1="444" x2="203" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="209" y1="444" x2="209" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="215" y1="444" x2="215" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="221" y1="444" x2="221" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="227" y1="444" x2="227" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="233" y1="444" x2="233" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="239" y1="444" x2="239" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="245" y1="444" x2="245" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="251" y1="444" x2="251" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="257" y1="444" x2="257" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="263" y1="444" x2="263" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="269" y1="444" x2="269" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="275" y1="444" x2="275" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="281" y1="444" x2="281" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="287" y1="444" x2="287" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="293" y1="444" x2="293" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="299" y1="444" x2="299" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="305" y1="444" x2="305" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="311" y1="444" x2="311" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="317" y1="444" x2="317" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="323" y1="444" x2="323" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="329" y1="444" x2="329" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="335" y1="444" x2="335" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="341" y1="444" x2="341" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="347" y1="444" x2="347" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="353" y1="444" x2="353" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="359" y1="444" x2="359" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="365" y1="444" x2="365" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="371" y1="444" x2="371" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="377" y1="444" x2="377" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="383" y1="444" x2="383" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="389" y1="444" x2="389" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="395" y1="444" x2="395" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="401" y1="444" x2="401" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="407" y1="444" x2="407" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="413" y1="444" x2="413" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="419" y1="444" x2="419" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="425" y1="444" x2="425" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="431" y1="444" x2="431" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="437" y1="444" x2="437" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="443" y1="444" x2="443" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="449" y1="444" x2="449" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="455" y1="444" x2="455" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="461" y1="444" x2="461" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="467" y1="444" x2="467" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="473" y1="444" x2="473" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="479" y1="444" x2="479" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="485" y1="444" x2="485" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="491" y1="444" x2="491" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="497" y1="444" x2="497" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="503" y1="444" x2="503" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="509" y1="444" x2="509" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="515" y1="444" x2="515" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="521" y1="444" x2="521" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="527" y1="444" x2="527" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="533" y1="444" x2="533" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="539" y1="444" x2="539" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="545" y1="444" x2="545" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="551" y1="444" x2="551" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="557" y1="444" x2="557" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="563" y1="444" x2="563" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="569" y1="444" x2="569" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="575" y1="444" x2="575" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="581" y1="444" x2="581" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="587" y1="444" x2="587" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="593" y1="444" x2="593" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="599" y1="444" x2="599" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="605" y1="444" x2="605" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="611" y1="444" x2="611" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="617" y1="444" x2="617" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="623" y1="444" x2="623" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="629" y1="444" x2="629" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="635" y1="444" x2="635" y2="55"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="444" x2="635" y2="444"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="436" x2="635" y2="436"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="429" x2="635" y2="429"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="422" x2="635" y2="422"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="415" x2="635" y2="415"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="408" x2="635" y2="408"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="401" x2="635" y2="401"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="394" x2="635" y2="394"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="387" x2="635" y2="387"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="380" x2="635" y2="380"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="373" x2="635" y2="373"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="366" x2="635" y2="366"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="359" x2="635" y2="359"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="352" x2="635" y2="352"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="344" x2="635" y2="344"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="337" x2="635" y2="337"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="330" x2="635" y2="330"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="323" x2="635" y2="323"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="316" x2="635" y2="316"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="309" x2="635" y2="309"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="302" x2="635" y2="302"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="295" x2="635" y2="295"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="288" x2="635" y2="288"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="281" x2="635" y2="281"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="274" x2="635" y2="274"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="267" x2="635" y2="267"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="260" x2="635" y2="260"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="253" x2="635" y2="253"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="245" x2="635" y2="245"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="238" x2="635" y2="238"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="231" x2="635" y2="231"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="224" x2="635" y2="224"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="217" x2="635" y2="217"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="210" x2="635" y2="210"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="203" x2="635" y2="203"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="196" x2="635" y2="196"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="189" x2="635" y2="189"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="182" x2="635" y2="182"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="175" x2="635" y2="175"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="168" x2="635" y2="168"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="161" x2="635" y2="161"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="154" x2="635" y2="154"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="146" x2="635" y2="146"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="139" x2="635" y2="139"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="132" x2="635" y2="132"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="125" x2="635" y2="125"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="118" x2="635" y2="118"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="111" x2="635" y2="111"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="104" x2="635" y2="104"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="97" x2="635" y2="97"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="90" x2="635" y2="90"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="83" x2="635" y2="83"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="76" x2="635" y2="76"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="69" x2="635" y2="69"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="62" x2="635" y2="62"/>
<line opacity="0.1" stroke="#000000" stroke-width="1" x1="35" y1="55" x2="635" y2="55"/>
<line opacity="0.2" stroke="#000000" stroke-width="1" x1="95" y1="444" x2="95" y2="55"/>
<line opacity="0.2" stroke="#000000" stroke-width="1" x1="155" y1="444" x2="155" y2="55"/>
<line opacity="0.2" stroke="#000000" stroke-width="1" x1="215" y1="444" x2="215" y2="55"/>
<line opacity="0.2" stroke="#000000" stroke-width="1" x1="275" y1="444" x2="275" y2="55"/>
<line opacity="0.2" stroke="#000000" stroke-width="1" x1="335" y1="444" x2="335" y2="55"/>
<line opacity="0.2" stroke="#000000" stroke-width="1" x1="395" y1="444" x2="395" y2="55"/>
<line opacity="0.2" stroke="#000000" stroke-width="1" x1="455" y1="444" x2="455" y2="55"/>
<line opacity="0.2" stroke="#000000" stroke-width="1" x1="515" y1="444" x2="515" y2="55"/>
<line opacity="0.2" stroke="#000000" stroke-width="1" x1="575" y1="444" x2="575" y2="55"/>
<line opacity="0.2" stroke="#000000" stroke-width="1" x1="635" y1="444" x2="635" y2="55"/>
<line opacity="0.2" stroke="#000000" stroke-width="1" x1="35" y1="408" x2="635" y2="408"/>
<line opacity="0.2" stroke="#000000" stroke-width="1" x1="35" y1="337" x2="635" y2="337"/>
<line opacity="0.2" stroke="#000000" stroke-width="1" x1="35" y1="267" x2="635" y2="267"/>
<line opacity="0.2" stroke="#000000" stroke-width="1" x1="35" y1="196" x2="635" y2="196"/>
<line opacity="0.2" stroke="#000000" stroke-width="1" x1="35" y1="125" x2="635" y2="125"/>
<line opacity="0.2" stroke="#000000" stroke-width="1" x1="35" y1="55" x2="635" y2="55"/>
<polyline fill="none" opacity="1" stroke="#000000" stroke-width="1" points="34,56 34,445 "/>
<text x="25" y="408" dy="0.5ex" text-anchor="end" font-family="sans-serif" font-size="9.67741935483871" opacity="1" fill="#000000">
0.0
</text>
<polyline fill="none" opacity="1" stroke="#000000" stroke-width="1" points="29,408 34,408 "/>
<text x="25" y="337" dy="0.5ex" text-anchor="end" font-family="sans-serif" font-size="9.67741935483871" opacity="1" fill="#000000">
0.2
</text>
<polyline fill="none" opacity="1" stroke="#000000" stroke-width="1" points="29,337 34,337 "/>
<text x="25" y="267" dy="0.5ex" text-anchor="end" font-family="sans-serif" font-size="9.67741935483871" opacity="1" fill="#000000">
0.4
</text>
<polyline fill="none" opacity="1" stroke="#000000" stroke-width="1" points="29,267 34,267 "/>
<text x="25" y="196" dy="0.5ex" text-anchor="end" font-family="sans-serif" font-size="9.67741935483871" opacity="1" fill="#000000">
0.6
</text>
<polyline fill="none" opacity="1" stroke="#000000" stroke-width="1" points="29,196 34,196 "/>
<text x="25" y="125" dy="0.5ex" text-anchor="end" font-family="sans-serif" font-size="9.67741935483871" opacity="1" fill="#000000">
0.8
</text>
<polyline fill="none" opacity="1" stroke="#000000" stroke-width="1" points="29,125 34,125 "/>
<polyline fill="none" opacity="1" stroke="#000000" stroke-width="1" points="35,445 635,445 "/>
<text x="95" y="455" dy="0.76em" text-anchor="middle" font-family="sans-serif" font-size="9.67741935483871" opacity="1" fill="#000000">
-0.8
</text>
<polyline fill="none" opacity="1" stroke="#000000" stroke-width="1" points="95,445 95,450 "/>
<text x="155" y="455" dy="0.76em" text-anchor="middle" font-family="sans-serif" font-size="9.67741935483871" opacity="1" fill="#000000">
-0.6
</text>
<polyline fill="none" opacity="1" stroke="#000000" stroke-width="1" points="155,445 155,450 "/>
<text x="215" y="455" dy="0.76em" text-anchor="middle" font-family="sans-serif" font-size="9.67741935483871" opacity="1" fill="#000000">
-0.4
</text>
<polyline fill="none" opacity="1" stroke="#000000" stroke-width="1" points="215,445 215,450 "/>
<text x="275" y="455" dy="0.76em" text-anchor="middle" font-family="sans-serif" font-size="9.67741935483871" opacity="1" fill="#000000">
-0.2
</text>
<polyline fill="none" opacity="1" stroke="#000000" stroke-width="1" points="275,445 275,450 "/>
<text x="335" y="455" dy="0.76em" text-anchor="middle" font-family="sans-serif" font-size="9.67741935483871" opacity="1" fill="#000000">
0.0
</text>
<polyline fill="none" opacity="1" stroke="#000000" stroke-width="1" points="335,445 335,450 "/>
<text x="395" y="455" dy="0.76em" text-anchor="middle" font-family="sans-serif" font-size="9.67741935483871" opacity="1" fill="#000000">
0.2
</text>
<polyline fill="none" opacity="1" stroke="#000000" stroke-width="1" points="395,445 395,450 "/>
<text x="455" y="455" dy="0.76em" text-anchor="middle" font-family="sans-serif" font-size="9.67741935483871" opacity="1" fill="#000000">
0.4
</text>
<polyline fill="none" opacity="1" stroke="#000000" stroke-width="1" points="455,445 455,450 "/>
<text x="515" y="455" dy="0.76em" text-anchor="middle" font-family="sans-serif" font-size="9.67741935483871" opacity="1" fill="#000000">
0.6
</text>
<polyline fill="none" opacity="1" stroke="#000000" stroke-width="1" points="515,445 515,450 "/>
<text x="575" y="455" dy="0.76em" text-anchor="middle" font-family="sans-serif" font-size="9.67741935483871" opacity="1" fill="#000000">
0.8
</text>
<polyline fill="none" opacity="1" stroke="#000000" stroke-width="1" points="575,445 575,450 "/>
<text x="635" y="455" dy="0.76em" text-anchor="middle" font-family="sans-serif" font-size="9.67741935483871" opacity="1" fill="#000000">
1.0
</text>
<polyline fill="none" opacity="1" stroke="#000000" stroke-width="1" points="635,445 635,450 "/>
<polyline fill="none" opacity="1" stroke="#FF0000" stroke-width="1" points="35,56 41,69 47,82 53,96 59,109 65,122 71,134 77,147 83,159 89,170 95,182 101,193 107,204 113,214 119,225 125,235 131,245 137,254 143,263 149,272 155,281 161,289 167,297 173,305 179,313 185,320 191,327 197,333 203,340 209,346 215,352 221,357 227,362 233,367 239,372 245,376 251,380 257,384 263,388 269,391 275,394 281,397 287,399 293,401 299,403 305,405 311,406 317,407 323,408 329,408 335,408 341,408 347,408 353,407 359,406 365,405 371,403 377,401 383,399 389,397 395,394 401,391 407,388 413,384 419,380 425,376 431,372 437,367 443,362 449,357 455,352 461,346 467,340 473,333 479,327 485,320 491,313 497,305 503,297 509,289 515,281 521,272 527,263 533,254 539,245 545,235 551,225 557,214 563,204 569,193 575,182 581,170 587,159 593,147 599,134 605,122 611,109 617,96 623,82 629,69 635,56 "/>
<rect x="542" y="235" width="88" height="30" opacity="0.8" fill="#FFFFFF" stroke="none"/>
<rect x="542" y="235" width="88" height="30" opacity="1" fill="none" stroke="#000000"/>
<text x="582" y="245" dy="0.76em" text-anchor="start" font-family="sans-serif" font-size="9.67741935483871" opacity="1" fill="#000000">
y = x^2
</text>
<polyline fill="none" opacity="1" stroke="#FF0000" stroke-width="1" points="552,250 572,250 "/>
</svg>
</div>
<h3 id="參考">參考</h3>
<ul>
<li><a href="https://datacrayon.com/posts/programming/rust-notebooks/setup-anaconda-jupyter-and-rust/">Setup Anaconda, Jupyter, and Rust | Data Crayon</a></li>
</ul>
</div>

        <hr/>
      
                <span class="post-title">
          <a href="https://blog.simplypatrick.com/posts/2019/12-25-klogg/" title="看 log 的好工具: klogg">
            <h2>看 log 的好工具: klogg</h2>
          </a>
        </span>
        <div class="post-meta">
          <span class="post-date">December 25, 2019</span>
          
          <a href="/categories/programming"><span class="label label-info">programming</span></a>
          
          
        </div>
        <div class="post-content"><p>工作上常需要看 log 解決問題，推薦一個好用的工具 <a href="https://github.com/variar/klogg">klogg</a>:</p>
<img src='/posts/2019/12-25-klogg/klogg.png' width="100%"></div>

        <hr/>
      
                <span class="post-title">
          <a href="https://blog.simplypatrick.com/tils/2019/2019-12-25-clion-makefile-projects/" title="用 CLion 開發使用 Makefile 建置的專案">
            <h2>用 CLion 開發使用 Makefile 建置的專案</h2>
          </a>
        </span>
        <div class="post-meta">
          <span class="post-date">December 25, 2019</span>
          <a href="/til"><span class="label label-info">TIL</span></a>
          
        </div>
        <div class="post-content"><p>目前 CLion 只支持使用 CMake 建置的專案，但對於使用 Makefile 的專案，官方其實也有提供稍微麻煩但還能用的解決辦法: <a href="https://www.jetbrains.com/help/clion/managing-makefile-projects.html">Managing Makefile Projects</a></p>
</div>

        <hr/>
      
                <span class="post-title">
          <a href="https://blog.simplypatrick.com/posts/2019/06-06-setup-fuchsia-rust-dev/" title="Setup Fuchsia Rust Development on macOS">
            <h2>Setup Fuchsia Rust Development on macOS</h2>
          </a>
        </span>
        <div class="post-meta">
          <span class="post-date">June 6, 2019</span>
          
          <a href="/categories/programming"><span class="label label-info">programming</span></a>
          
          
          <a href="/tags/fuchsia"><span class="label label-primary">fuchsia</span></a>
          
          <a href="/tags/rust"><span class="label label-primary">rust</span></a>
          
        </div>
        <div class="post-content"><p>基本上照著官方的指引 <a href="https://fuchsia.googlesource.com/fuchsia/+/refs/heads/master/docs/development/languages/rust/editors.md">Rust Editor Configuration</a>，設置 Fuchsia OS 開發的 Rust 開發環境主要就兩個步驟:</p>
<ol>
<li>產生 <code>Cargo.toml</code></li>
<li>設定編輯器使用 Rust 的 Language Server (<code>RLS</code>)</li>
</ol>
<h3 id="產生-cargotoml">產生 <code>Cargo.toml</code></h3>
<p>很簡單，就是用 <code>fx gen-cargo //garnet/foo/path/to/target:label</code> 產生對應的 <code>Cargo.toml</code>。例如 <code>fx gen-cargo //garnet/bin/log_listener:bin</code> 會產生 <code>/garnet/bin/log_listener/Cargo.toml</code>。</p>
<h3 id="設定-rls">設定 RLS</h3>
<p>官方文檔提到要先把 Fuchsia 自帶的 Rust 連結到 rustup，並且設成預設的 toolchain:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ rustup toolchain link fuchsia /&lt;your Fuchsia root&gt;/buildtools/&lt;platform&gt;/rust
$ rustup default fuchsia
</code></pre></div><p>我是有做第一步，但第二步我比較持保留態度，之後試過似乎不做也沒影響，我會建議跳過這一步。</p>
<h4 id="vim">Vim</h4>
<p>跟 C++ 類似，只是 Language Server 我們必須從 <code>clangd</code> 換成 <code>RLS</code>，所以可以在 Vim 裡用 <code>:CocInstall coc-rls</code> 來安裝 <a href="https://github.com/neoclide/coc-rls">coc-rls</a> extension，如果你系統之前就有裝過 RLS 的話，在 Vim 裡打開對應的目錄就會有 code completion 的功能了。</p>
<p>如果你的系統沒有 RLS 或你覺得用 Fuchsia 自帶的 Rust toolchain 比較保險，可以用 <code>:CocConfig</code> 把下列設定加進去:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">{
  <span style="color:#e6db74">&#34;rust.target&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;x86_64-fuchsia&#34;</span>,
  <span style="color:#e6db74">&#34;rust.target_dir&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;/&lt;your Fuchsia root&gt;/out/cargo_target&#34;</span>,
  <span style="color:#e6db74">&#34;rust.unstable_features&#34;</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,
  <span style="color:#e6db74">&#34;rust-client.rlsPath&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;/&lt;your Fuchsia root&gt;/buildtools/&lt;platform&gt;/rust/bin/rls&#34;</span>,
  <span style="color:#e6db74">&#34;rust-client.disableRustup&#34;</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,

  <span style="color:#75715e">// Some optional settings that may help:
</span><span style="color:#75715e"></span>  <span style="color:#e6db74">&#34;rust.goto_def_racer_fallback&#34;</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,
  <span style="color:#e6db74">&#34;rust-client.logToFile&#34;</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,
}
</code></pre></div><h4 id="visual-studio-code">Visual Studio Code</h4>
<p>VSCode 則是需要安裝 <a href="https://marketplace.visualstudio.com/items?itemName=rust-lang.rust">Rust (rls)</a> 這個 plugin。同樣如果你的系統沒有 RLS 或你覺得用 Fuchsia 自帶的 Rust toolchain 比較保險，加入下列的設定到 VS Code 裡：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">{
  <span style="color:#e6db74">&#34;rust.target&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;x86_64-fuchsia&#34;</span>,
  <span style="color:#e6db74">&#34;rust.target_dir&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;/&lt;your Fuchsia root&gt;/out/cargo_target&#34;</span>,
  <span style="color:#e6db74">&#34;rust.unstable_features&#34;</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,
  <span style="color:#e6db74">&#34;rust-client.rlsPath&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;/&lt;your Fuchsia root&gt;/buildtools/&lt;platform&gt;/rust/bin/rls&#34;</span>,
  <span style="color:#e6db74">&#34;rust-client.disableRustup&#34;</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,

  <span style="color:#75715e">// Some optional settings that may help:
</span><span style="color:#75715e"></span>  <span style="color:#e6db74">&#34;rust.goto_def_racer_fallback&#34;</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,
  <span style="color:#e6db74">&#34;rust-client.logToFile&#34;</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,
}
</code></pre></div></div>

        <hr/>
      
                <span class="post-title">
          <a href="https://blog.simplypatrick.com/posts/2019/06-05-setup-fuchsia-c&#43;&#43;-dev/" title="Setup Fuchsia C&#43;&#43; Development on macOS">
            <h2>Setup Fuchsia C&#43;&#43; Development on macOS</h2>
          </a>
        </span>
        <div class="post-meta">
          <span class="post-date">June 5, 2019</span>
          
          <a href="/categories/programming"><span class="label label-info">programming</span></a>
          
          
          <a href="/tags/fuchsia"><span class="label label-primary">fuchsia</span></a>
          
          <a href="/tags/c&#43;&#43;"><span class="label label-primary">c&#43;&#43;</span></a>
          
        </div>
        <div class="post-content"><h2 id="關於-fuchsia">關於 Fuchsia</h2>
<p>Fuchsia 是 Google 開發中的新作業系統，它的底層原始碼可以到 <a href="https://fuchsia.googlesource.com">https://fuchsia.googlesource.com</a> 公開下載。雖然 Google 對外宣稱 Fuchsia 是個實驗性質的專案，但蠻多人認為它有潛力成為 Google 的大一統 OS，慢慢取代掉 Android 或 Chrome OS，姑且不論這是否會發生，對於喜歡研究系統軟體或嵌入式軟體技術的開發人員，Fuchsia 可以讓你一窺如何打造一個現代化的 OS。</p>
<h2 id="fuchsia-的開發環境">Fuchsia 的開發環境</h2>
<p>目前 Fuchsia OS 可以在 Linux 或 macOS 上編譯，這篇主要是分享在 macOS 上建置 C++ 的 OS 開發環境的經驗，包括:</p>
<ul>
<li>基本的編輯器 (Vim 及 Visual Studio Code) 設置</li>
<li>Code completion 的設置</li>
<li>使用 <a href="https://direnv.net/">direnv</a> 來實現設置自動化</li>
</ul>
<h2 id="編輯器選擇">編輯器選擇</h2>
<p>我的環境建置基本是根據這份官方提供的 <a href="https://fuchsia.googlesource.com/fuchsia/+/refs/heads/master/docs/development/languages/c-cpp/editors.md">C++ Editor/IDE Setup</a> 指南，裡面有提到 CLion, Vim, 以及 Visual Studio Code，試用過後個人推薦 <strong>Vim &gt; VS Code &raquo; CLion</strong>，主要還是因為個人開發時通常只會需要修改全部 code base 的極小一部份，小巧的編輯器使用體驗會比較流暢，也不會耗用太多的機器資源去處理不會修改的部份。</p>
<p>而開發必備的 code completion 功能，個人推薦使用 <strong>compilation database + <code>clangd</code></strong> 的設置。</p>
<h2 id="vim-設置">Vim 設置</h2>
<h3 id="vim-版本">Vim 版本</h3>
<p>推薦使用 Vim &gt;= 8.1 或是最新的 Neovim (我目前用 v0.3.7)。</p>
<h3 id="fuchsia_dir-及-fuchsiavim"><code>FUCHSIA_DIR</code> 及 <code>fuchsia.vim</code></h3>
<p>Fuchsia 預設提供了<a href="https://fuchsia.googlesource.com/fuchsia/+/refs/heads/master/scripts/vim/README.md">一些 Vim 專用的設定</a>，在 <code>~/.vimrc</code> 裡套用這些設定的修改如下:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#66d9ef">if</span> $FUCHSIA_DIR !<span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>
  source $FUCHSIA_DIR/scripts/vim/fuchsia.vim
endif
</code></pre></div><p>我不喜歡每次手動設置 <code>export FUCHSIA_DIR=/path/to/fuchsia-dir</code>，也不喜歡直接修改 <code>~/.bashrc</code>，所以用 <a href="https://direnv.net/">direnv</a> (直接用 Homebrew 安裝) 在進目錄時自動套用設定。</p>
<p>在 <code>path/to/fuchsia-dir/.envrc</code> 加入:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># For VIM to find fuchsia.vim</span>
export FUCHSIA_DIR<span style="color:#f92672">=</span><span style="color:#e6db74">`</span>pwd<span style="color:#e6db74">`</span>
</code></pre></div><p>之後 <code>cd</code> 進去就會幫你把 <code>FUCHSIA_DIR</code> 的環境變量設定好了。</p>
<h3 id="code-completion-設置">Code Completion 設置</h3>
<h4 id="前置準備">前置準備</h4>
<p>確認 <code>fx build</code> 是成功的，然後使用 <code>fx compdb</code> 產生 <code>compile_commands.json</code>。</p>
<h4 id="language-server-clangd">Language Server <code>clangd</code></h4>
<p>同樣利用 direnv 來套用 <code>PATH</code> 的修改，因此新增這一行到 <code>path/to/fuchsia-dir/.envrc</code> :</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">export PATH<span style="color:#f92672">=</span>$FUCHSIA_DIR/buildtools/mac-x64/clang/bin:$PATH
</code></pre></div><p>目的是讓 Vim 優先使用 Fuchsia 自帶的 <code>clangd</code>，否則使用其他版本的 <code>clangd</code> 可能會有 C++ 編譯的問題產生。</p>
<h4 id="conquer-of-completion-coc">Conquer of Completion (CoC)</h4>
<p>因為 <a href="https://github.com/Valloric/YouCompleteMe">YCM</a> 其實有點肥大，安裝上也比較麻煩，我現在比較喜歡用 <a href="https://github.com/neoclide/coc.nvim">Coc</a>，Coc 的詳細配置可以參考 <a href="https://medium.com/@rohmanhakim/how-to-set-up-code-completion-for-vim-in-macos-9766dd459385">How to Set Up Code-Completion for Vim in macOS</a>。</p>
<p>基本上在 Vim 裡執行 <code>:CocConfig</code> 把以下配置填上應該就行了。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">{
  <span style="color:#e6db74">&#34;languageserver&#34;</span><span style="color:#f92672">:</span> {
    <span style="color:#e6db74">&#34;clangd&#34;</span><span style="color:#f92672">:</span> {
      <span style="color:#e6db74">&#34;command&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;clangd&#34;</span>,
      <span style="color:#e6db74">&#34;rootPatterns&#34;</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#34;compile_flags.txt&#34;</span>, <span style="color:#e6db74">&#34;compile_commands.json&#34;</span>, <span style="color:#e6db74">&#34;.vim/&#34;</span>, <span style="color:#e6db74">&#34;.git/&#34;</span>, <span style="color:#e6db74">&#34;.hg/&#34;</span>],
      <span style="color:#e6db74">&#34;filetypes&#34;</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#34;c&#34;</span>, <span style="color:#e6db74">&#34;cc&#34;</span>, <span style="color:#e6db74">&#34;cpp&#34;</span>, <span style="color:#e6db74">&#34;objc&#34;</span>, <span style="color:#e6db74">&#34;objcpp&#34;</span>]
    }
  }
}
</code></pre></div><h2 id="visual-studio-code-設置">Visual Studio Code 設置</h2>
<p>VS Code 設置上比較簡單，基本上只要把 <a href="https://marketplace.visualstudio.com/items?itemName=llvm-vs-code-extensions.vscode-clangd">vscode-clangd</a> 安裝起來並確保 Fuchsia 自帶的 <code>clangd</code> 可以在 <code>PATH</code> 裡找到就可以用了。使用速度上雖然比起 Vim 遲鈍了一些，但整體流暢度還是可是在我可以接受的範圍。</p>
</div>

        <hr/>
      
    </div>
    <div class="col-md-3 sidebar">
      <aside>
  <section>
    <img class="img-thumbnail" src="https://lh3.googleusercontent.com/-GqbL2_hPq9Y/UC9brHyHa1I/AAAAAAAAEoY/rGGtCNWe3Vw/s800/patrick.jpg">
    <div class="author-about">Patrick Tsai is a software developer in heart. He is interested in mobile, web, and multimedia programming.</div>
  </section>
  <section>
  <ul class="list-group">
  
    <li class="list-group-item"><a href="https://blog.simplypatrick.com/posts/2021/01-02-rust-jupyter-notebook/">建置 Jupyter Notebook 的 Rust 運作環境</a></li>
  
    <li class="list-group-item"><a href="https://blog.simplypatrick.com/posts/2019/12-25-klogg/">看 log 的好工具: klogg</a></li>
  
    <li class="list-group-item"><a href="https://blog.simplypatrick.com/tils/2019/2019-12-25-clion-makefile-projects/">用 CLion 開發使用 Makefile 建置的專案</a></li>
  
    <li class="list-group-item"><a href="https://blog.simplypatrick.com/posts/2019/06-06-setup-fuchsia-rust-dev/">Setup Fuchsia Rust Development on macOS</a></li>
  
    <li class="list-group-item"><a href="https://blog.simplypatrick.com/posts/2019/06-05-setup-fuchsia-c&#43;&#43;-dev/">Setup Fuchsia C&#43;&#43; Development on macOS</a></li>
  
    <li class="list-group-item"><a href="https://blog.simplypatrick.com/posts/2019/04-08-learning-rust/">Learning Rust</a></li>
  
    <li class="list-group-item"><a href="https://blog.simplypatrick.com/posts/2018/03-12-c&#43;&#43;-conan/">C&#43;&#43; 套件管理: 使用 Conan</a></li>
  
    <li class="list-group-item"><a href="https://blog.simplypatrick.com/posts/2018/03-10-catch2/">C&#43;&#43; 單元測試: 使用 Catch2</a></li>
  
    <li class="list-group-item"><a href="https://blog.simplypatrick.com/posts/2018/02-14-kotlin-coroutines-and-threads/">Kotlin Coroutines and Threads</a></li>
  
    <li class="list-group-item"><a href="https://blog.simplypatrick.com/posts/2018/02-13-kotlin-coroutines-api/">Kotlin Coroutine API</a></li>
  
  </ul>
</section>

  <section>
  <a class="twitter-timeline" href="https://twitter.com/PatrickSimply" data-tweet-limit="5" data-widget-id="411796037154521088">Tweets by @PatrickSimply</a>
  <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
  </script>
</section>

<aside>

    </div>
  </div>
    </div>

    <div class="row">
    <div class="col-md-12">
      <footer id="footer" class="text-center">
        © Patrick Tsai 2003-2019.
        Proudly powered by <a href="http://gohugo.io/">Hugo</a>.
      </footer>
    </div>
  </div>

  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
  <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
  <script src="/js/bootstrap-toc.min.js"></script>
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-73968064-1', 'auto');
  ga('send', 'pageview');

</script>


  <script src="/js/prism.js"></script>

</body>
</html>
